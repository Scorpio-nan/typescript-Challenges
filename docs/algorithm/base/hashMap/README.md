# 哈希表

## 基本概念
`HashTable`哈希表，又称**散列表**，其通过建立`key`和`value`之间的映射关系，实现高效的元素查询。

例如：我们规定有`N`个学生，每个学生都有**学号**和**姓名**两项数据，我们希望实现输入学号，返回学生姓名的查询功能，则可以采用如下哈希表来实现。
![学生哈希表](https://www.hello-algo.com/chapter_hashing/hash_map.assets/hash_table_lookup.png)

除哈希表以外，通常还会用链表和数组实现查询功能，三者效率对比如下：
| 操作 | 数组  | 链表 | 哈希表 |
| --- | --- | --- | --- |
| 查找元素 | O(n)  | O(n) | O(1) |
| 添加元素 | O(1)  | O(1) | O(1) |
| 删除元素 | O(n)  | O(n) | O(1) |

通过以上表可见：在哈希表中进行增、删、查、改操作时间复杂度都是`O(1)`，非常高效。

哈希表的常见操作有：初始化、添加键值对和删除键值对。其遍历方式一般有：键值对遍历、键遍历和值遍历。
```js
// 初始化
const map = new Map();

// 添加键值对
map.set(12836, '小哈');
map.set(15937, '小啰');
map.set(16750, '小算');
map.set(13276, '小法');
map.set(10583, '小鸭');

// 查询操作
const name = map.get(15937)
console.log(name) // 小罗

// 删除键值对
map.delete(10583)

// 键值对遍历
for(let [k, v] of map.entries()) {
  console.log(k, v)
}

// 键遍历
for(let k of map.keys()) {
  console.log(k)
}

// 值遍历
for(let v of map.values()) {
  console.log(v)
}
```

基于上面通过学号查询学习姓名的功能，考虑最简单的情况，可以使用数组来实现一个哈希表。
* **输入**：学生学号。
* **过程**：通过学生学号，得到其所在数组中的索引位置。这个过程由**哈希函数**来实现。
* **输出**：学生姓名。

完整代码，请参考[数组实现哈希表](https://github.com/wangtunan/js-algorithm/blob/master/src/hashMap/arrayHashMap.js)

![哈希实现案例](https://www.hello-algo.com/chapter_hashing/hash_map.assets/hash_function.png)

## 哈希冲突
```js
function hashFunc (key) {
  return key % 100;
}
```
从以上哈希函数的实现中，很容易可以看出问题：当`key`超过100时，存在两个不同的`key`对应同一个索引位置的问题，例如：
```js
110 % 100 === 10 % 100
```
针对以上情况，我们称之为**哈希冲突**。
![哈希冲突](https://www.hello-algo.com/chapter_hashing/hash_map.assets/hash_collision.png)

再次审视哈希函数的实现和哈希冲突问题，很容易想到一种解决办法：哈希表容量`N`越大，多个`key`被分配到同一个空间的概率就越低，冲突就越少，我们称之为**哈希表扩容**。

类似于数组的扩容，哈希表扩容需要将原来的键值对重新计算，并重新分配到新的哈希表中，这个过程非常耗时。

基于哈希表扩容机制，衍生出一个重要概念：**负载因子**，其定义为：哈希表元素的数量除以哈希表的容量，用负载因子来衡量哈希表冲突的严重程度，也常被用于哈希表扩容的触发条件。

在`Java`语言中，当负载因子超过`0.75`时，系统会将哈希表的容量扩展到原来的两倍。

## 哈希冲突解决办法
当哈希发生冲突时，直接扩容简单粗暴且有效，但其效率实在太低。其它常见的解决办法有：
* **链式地址**：将哈希表中值只能存储单一元素，调整为链表，当此`key`发生哈希冲突时，值当做链表节点进行存储。
* **开放寻址**：不引入额外的数据结构，当哈希发生冲突时，通过**多次探测**来处理哈希冲突，探测的方式主要有：线性探测、平方探测以及多次哈希等。

### 链式地址

### 开放寻址

## 哈希算法

## 参考
* [Hello 算法 哈希表](https://www.hello-algo.com/chapter_hashing/)
